package filters;

import static org.junit.Assert.*;
import org.junit.Before;
import org.junit.Test;

/**
 * Base test class for Sharpen filter tests containing common setup and utilities.
 */
abstract class SharpenTestBase {
  protected Sharpen sharpenFilter;
  protected static final double DELTA = 0.0001;

  @Before
  public void setUp() {
    sharpenFilter = new Sharpen();
  }

  @Test
  public void testSharpenConstructor() {
    assertNotNull("Sharpen filter should not be null", sharpenFilter);
    assertEquals("Filter option should be SHARPEN",
            FilterOption.SHARPEN,
            ((AbstractFilter) sharpenFilter).filterOption);
  }

  @Test
  public void testSharpenKernelValues() {
    double[][] kernel = FilterOption.SHARPEN.getKernel();
    assertEquals("Kernel should be 5x5", 5, kernel.length);
    assertEquals("Kernel should be 5x5", 5, kernel[0].length);

    assertEquals("Center value should be 1", 1.0, kernel[2][2], DELTA);
    assertEquals("Edge value should be -1/8", -0.125, kernel[0][0], DELTA);
    assertEquals("Near center value should be 1/4", 0.25, kernel[1][2], DELTA);
  }

  @Test(expected = NullPointerException.class)
  public void testApplyFilterWithNullImage() {
    sharpenFilter.applyFilter(null);
  }
}